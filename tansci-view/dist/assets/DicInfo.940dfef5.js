import{_ as A}from"./Table.231e28f6.js";import{m as G,r as H,t as W,o as X,U as j,a as n,b as y,c as h,d as e,w as l,g as r,e as L,s as z,F as J,h as K,v as g,V as O,E as _,W as P,T as Q,X as Y,i as Z,S as ee}from"./index.155e7f5c.js";const le={class:"dic"},te=g("\u6DFB\u52A0"),oe=g("\u7F16\u8F91"),ae=g("\u5220\u9664"),re={class:"dialog-footer"},se=g("\u53D6 \u6D88"),de=g("\u786E \u5B9A"),ce={__name:"DicInfo",setup(ne){const V=G(null),s=H({searchForm:{keyword:null},loading:!1,tableTitle:[{prop:"dicLabel",label:"\u5B57\u5178\u6807\u7B7E",align:"left"},{prop:"groupName",label:"\u5206\u7EC4\u540D\u79F0"},{prop:"type",alias:"typeName",label:"\u5B57\u5178\u7C7B\u578B"},{prop:"dicValue",label:"\u5B57\u5178\u503C"},{prop:"remarks",label:"\u5907\u6CE8"},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"}],tableData:[],addVisible:!1,addForm:{id:"",parentId:"",groupName:"",type:"",dicLabel:"",dicValue:"",sort:0,remarks:""},typeList:[],operate:""}),{searchForm:w,tableHeight:ue,loading:N,tableTitle:F,tableData:x,addVisible:f,addForm:d,typeList:C,operate:ie}=W(s);X(()=>{m()});const m=()=>{s.loading=!0,j(s.searchForm).then(t=>{s.loading=!1,s.tableData=t.result})},I=()=>{m()},U=()=>{ee({groupName:"sys_dic_type"}).then(t=>{s.typeList=t.result})},v=async()=>{if(s.operate==1){const t=r(V);if(!t)return;await t.validate(),O(s.addForm).then(o=>{o&&(s.addVisible=!1,_.success({message:"\u6DFB\u52A0\u6210\u529F\uFF01",type:"success"}),s.addForm={parentId:"",groupName:"",type:"",dicLabel:"",dicValue:"",sort:0,remarks:""},m())})}else s.operate==2&&P(s.addForm).then(t=>{t&&(s.addVisible=!1,_.success({message:"\u66F4\u65B0\u6210\u529F\uFF01",type:"success"}),s.addForm={id:"",parentId:"",groupName:"",type:"",dicLabel:"",dicValue:"",sort:0,remarks:""},m())})},B=t=>{console.log(t.column.row.parentId),s.addForm={id:null,parentId:t.column.row.id,groupName:null,type:null,dicLabel:null,dicValue:null,sort:0,remarks:null},U(),s.addVisible=!0,s.operate=1},D=t=>{if(t.column.row.parentId==0){_.warning({type:"warning",message:"\u7CFB\u7EDF\u6839\u8282\u70B9\u4E0D\u5141\u8BB8\u7F16\u8F91!"});return}s.addForm={id:t.column.row.id,parentId:t.column.row.parentId,groupName:t.column.row.groupName,type:t.column.row.type,dicLabel:t.column.row.dicLabel,dicValue:t.column.row.dicValue,sort:t.column.row.sort,remarks:t.column.row.remarks},s.addVisible=!0,s.operate=2},T=t=>{if(t.column.row.parentId==0){_.warning({type:"warning",message:"\u7CFB\u7EDF\u6839\u8282\u70B9\u4E0D\u5141\u8BB8\u5220\u9664!"});return}Q.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u6587\u4EF6, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{let o={id:t.column.row.id};Y(o).then(u=>{u&&(_.success({type:"success",message:"\u5220\u9664\u6210\u529F!"}),m())})}).catch(o=>{console.log(o)})};return(t,o)=>{const u=n("el-input"),c=n("el-button"),i=n("el-form-item"),p=n("el-col"),$=n("el-option"),q=n("el-select"),b=n("el-row"),E=n("el-input-number"),R=n("el-form"),M=n("el-dialog"),S=n("el-card");return y(),h("div",le,[e(S,null,{default:l(()=>[e(A,{data:r(x),column:r(F),operation:!0,page:!1,loading:r(N)},{search:l(()=>[L("div",null,[e(u,{onChange:I,modelValue:r(w).keyword,"onUpdate:modelValue":o[0]||(o[0]=a=>r(w).keyword=a),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u7B5B\u9009"},null,8,["modelValue"])])]),column:l(a=>[e(c,{onClick:k=>B(a),type:"text",style:{color:"var(--add)"}},{default:l(()=>[te]),_:2},1032,["onClick"]),e(c,{onClick:k=>D(a),type:"text",style:{color:"var(--edit)"}},{default:l(()=>[oe]),_:2},1032,["onClick"]),e(c,{onClick:k=>T(a),type:"text",style:{color:"var(--delete)"}},{default:l(()=>[ae]),_:2},1032,["onClick"])]),_:1},8,["data","column","loading"]),e(M,{title:"\u65B0\u589E\u5B57\u5178",modelValue:r(f),"onUpdate:modelValue":o[8]||(o[8]=a=>z(f)?f.value=a:null),"show-close":!1},{footer:l(()=>[L("span",re,[e(c,{onClick:o[7]||(o[7]=a=>f.value=!1)},{default:l(()=>[se]),_:1}),e(c,{type:"primary",onClick:v},{default:l(()=>[de]),_:1})])]),default:l(()=>[e(R,{model:r(d),rules:t.rules,ref_key:"addRuleForm",ref:V,"label-position":"right","label-width":"100px"},{default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(i,{label:"\u5206\u7EC4\u540D",prop:"groupName",rules:[{required:!0,message:"\u5206\u7EC4\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{default:l(()=>[e(u,{modelValue:r(d).groupName,"onUpdate:modelValue":o[1]||(o[1]=a=>r(d).groupName=a),placeholder:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(i,{label:"\u5B57\u5178\u7C7B\u578B",prop:"type",rules:[{required:!0,message:"\u5B57\u5178\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]},{default:l(()=>[e(q,{modelValue:r(d).type,"onUpdate:modelValue":o[2]||(o[2]=a=>r(d).type=a),placeholder:"\u8BF7\u9009\u62E9\u5B57\u5178\u7C7B\u578B",style:{width:"100%"}},{default:l(()=>[(y(!0),h(J,null,K(r(C),a=>(y(),Z($,{key:a,label:a.dicLabel,value:a.dicValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(i,{label:"\u6807\u7B7E\u540D",prop:"dicLabel",rules:[{required:!0,message:"\u6807\u7B7E\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{default:l(()=>[e(u,{modelValue:r(d).dicLabel,"onUpdate:modelValue":o[3]||(o[3]=a=>r(d).dicLabel=a),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(i,{label:"\u6570\u636E\u503C",prop:"dicValue",rules:[{required:!0,message:"\u6570\u636E\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{pattern:/^([0-9]+\.?[0-9]*|-[0-9]+\.?[0-9]*)$/,message:"\u6570\u636E\u503C\u5FC5\u987B\u662F\u6570\u5B57",trigger:"blur"}]},{default:l(()=>[e(u,{modelValue:r(d).dicValue,"onUpdate:modelValue":o[4]||(o[4]=a=>r(d).dicValue=a),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u503C",autocomplete:"off",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(b,{gutter:20},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(i,{label:"\u6392\u5E8F",prop:"sort",rules:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{default:l(()=>[e(E,{modelValue:r(d).sort,"onUpdate:modelValue":o[5]||(o[5]=a=>r(d).sort=a),min:0,max:999,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20},{default:l(()=>[e(p,null,{default:l(()=>[e(i,{label:"\u5907\u6CE8",prop:"remarks"},{default:l(()=>[e(u,{type:"textarea",modelValue:r(d).remarks,"onUpdate:modelValue":o[6]||(o[6]=a=>r(d).remarks=a),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",rows:3,maxlength:"120","show-word-limit":"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})])}}};export{ce as default};
