import{r as x,Z as T,t as k,a as u,b as _,i as M,w as a,c as C,h as A,j as O,g as n,F as S,l as Z,o as j,_ as P,d as e,e as G,q as H,z as J,$ as K,s as h,E as b,S as Q,a0 as W,a1 as X,a2 as Y}from"./index.3389bda0.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";const le={__name:"Icon",props:{iconVisible:{type:Boolean,default:!1}},emits:["onIcon"],setup(N,{emit:V}){const l=N,y=x({iconList:T}),{iconList:i}=k(y);return(I,f)=>{const s=u("el-icon"),c=u("el-dialog");return _(),M(c,{modelValue:l.iconVisible,"onUpdate:modelValue":f[0]||(f[0]=m=>l.iconVisible=m),title:"\u56FE\u6807","close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1,width:"70%"},{default:a(()=>[(_(!0),C(S,null,A(n(i),m=>(_(),M(s,{key:m,onClick:w=>I.$emit("onIcon",m),size:30,color:"#242e42",style:{border:"1px solid #e4e7ed",padding:"1rem",cursor:"pointer"}},{default:a(()=>[(_(),M(O(m)))]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])}}};const oe={class:"menu"},ne={class:"detail-operate"},te=h("\u6DFB\u52A0"),ae=h("\u7F16\u8F91"),se=h("\u5220\u9664"),re=h("\u63D0\u4EA4"),ue={__name:"Menu",setup(N){const V=Z(null),l=x({treeData:[],operate:0,menuId:null,iconVisible:!1,addMenuForm:{id:"",parentId:"",name:"",type:"",url:"",chineseName:"",englishName:"",icon:"",sort:0}}),{treeData:y,operate:i,menuId:I,iconVisible:f,addMenuForm:s}=k(l);j(()=>{c()});const c=()=>{P({}).then(o=>{o&&(l.treeData=o.result)})},m=o=>{l.operate=0,l.menuId=o.id,l.addMenuForm={id:o.id,parentId:o.parentId,name:o.name,type:o.type,url:o.url,chineseName:o.chineseName,englishName:o.englishName,icon:o.icon,sort:o.sort}},w=o=>{if(o==1)l.operate=1,l.addMenuForm={id:"",parentId:l.menuId,name:"",type:"",url:"",chineseName:"",englishName:"",icon:"",sort:0};else if(o==2)l.operate=2;else{if(!l.menuId)return b.warning("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u83DC\u5355\uFF01"),!1;l.operate=0,Q.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u83DC\u5355, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{W({id:l.menuId}).then(t=>{t&&(b.success("\u5220\u9664\u6210\u529F!"),c())})}).catch(t=>{console.log(t)})}},U=()=>{l.iconVisible=!0},B=o=>{l.addMenuForm.icon=o.name,l.iconVisible=!1},q=async()=>{if(l.operate==1){const o=n(V);if(!o)return;await o.validate(),X(l.addMenuForm).then(t=>{t&&(l.addMenuVisible=!1,b.success({message:"\u6DFB\u52A0\u6210\u529F\uFF01",type:"success"}),l.operate=0,l.addMenuForm={id:"",parentId:"",name:"",type:"",url:"",chineseName:"",englishName:"",icon:"",sort:0},c())})}else l.operate==2&&Y(l.addMenuForm).then(o=>{o&&(l.addMenuVisible=!1,b.success({message:"\u66F4\u65B0\u6210\u529F\uFF01",type:"success"}),l.operate=0,l.addMenuForm={id:"",parentId:"",name:"",type:"",url:"",chineseName:"",englishName:"",icon:"",sort:0},c())})};return(o,t)=>{const $=u("el-tree"),F=u("el-card"),v=u("el-radio-button"),D=u("el-radio-group"),p=u("el-input"),d=u("el-form-item"),g=u("el-option"),E=u("el-select"),L=u("el-input-number"),R=u("el-button"),z=u("el-form");return _(),C("div",oe,[e(F,{class:"menu-tree",shadow:"never"},{default:a(()=>[e($,{data:n(y),props:{children:"children",label:"chineseName"},accordion:"","highlight-current":"",onNodeClick:m},null,8,["data"])]),_:1}),e(F,{class:"menu-detail",shadow:"never"},{default:a(()=>[G("div",ne,[e(D,{onChange:w,modelValue:n(i),"onUpdate:modelValue":t[0]||(t[0]=r=>H(i)?i.value=r:null)},{default:a(()=>[e(v,{label:1},{default:a(()=>[te]),_:1}),e(v,{label:2},{default:a(()=>[ae]),_:1}),e(v,{label:3},{default:a(()=>[se]),_:1})]),_:1},8,["modelValue"])]),e(z,{model:n(s),rules:o.rules,ref_key:"addMenuRuleForm",ref:V,disabled:n(i)==0||n(i)==3,"label-position":"right","label-width":"150px"},{default:a(()=>[e(d,{label:"\u83DC\u5355\u540D\u79F0",prop:"name",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{pattern:/^[A-Za-z0-9]+$/,message:"\u5FC5\u987B\u662F\u5B57\u6BCD",trigger:"blur"}]},{default:a(()=>[e(p,{modelValue:n(s).name,"onUpdate:modelValue":t[1]||(t[1]=r=>n(s).name=r),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{width:"50%"}},null,8,["modelValue"])]),_:1}),e(d,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B",trigger:"change"}]},{default:a(()=>[e(E,{modelValue:n(s).type,"onUpdate:modelValue":t[2]||(t[2]=r=>n(s).type=r),placeholder:"\u8BF7\u9009\u83DC\u5355\u7C7B\u578B",style:{width:"50%"}},{default:a(()=>[e(g,{label:"\u6309\u94AE",value:0}),e(g,{label:"\u83DC\u5355",value:1}),e(g,{label:"\u5D4C\u5957\u94FE\u63A5",value:2}),e(g,{label:"\u8DF3\u8F6C\u94FE\u63A5",value:3})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"\u83DC\u5355\u8DEF\u7531",prop:"url",rules:[{required:!0,message:"\u8DEF\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{default:a(()=>[e(p,{modelValue:n(s).url,"onUpdate:modelValue":t[3]||(t[3]=r=>n(s).url=r),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531",style:{width:"50%"}},null,8,["modelValue"])]),_:1}),e(d,{label:"\u4E2D\u6587\u540D\u79F0",prop:"chineseName",rules:[{required:!0,message:"\u4E2D\u6587\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{0,}$/,message:"\u5FC5\u987B\u662F\u6C49\u5B57",trigger:"blur"}]},{default:a(()=>[e(p,{modelValue:n(s).chineseName,"onUpdate:modelValue":t[4]||(t[4]=r=>n(s).chineseName=r),placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",style:{width:"50%"}},null,8,["modelValue"])]),_:1}),e(d,{label:"\u82F1\u6587\u540D\u79F0",prop:"englishName"},{default:a(()=>[e(p,{modelValue:n(s).englishName,"onUpdate:modelValue":t[5]||(t[5]=r=>n(s).englishName=r),placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u540D\u79F0",autocomplete:"off",style:{width:"50%"}},null,8,["modelValue"])]),_:1}),e(d,{label:"\u83DC\u5355\u56FE\u6807",prop:"icon",rules:[{required:!0,message:"\u83DC\u5355\u56FE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{default:a(()=>[e(p,{modelValue:n(s).icon,"onUpdate:modelValue":t[6]||(t[6]=r=>n(s).icon=r),onClick:U,readonly:"","suffix-icon":"Platform",style:{width:"50%"}},null,8,["modelValue"]),e(le,{iconVisible:n(f),onOnIcon:B},null,8,["iconVisible"])]),_:1}),e(d,{label:"\u83DC\u5355\u987A\u5E8F",prop:"sort",rules:[{required:!0,message:"\u83DC\u5355\u987A\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},{default:a(()=>[e(L,{modelValue:n(s).sort,"onUpdate:modelValue":t[7]||(t[7]=r=>n(s).sort=r),min:0,max:999,style:{width:"50%"}},null,8,["modelValue"])]),_:1}),J(e(d,null,{default:a(()=>[e(R,{type:"primary",onClick:q},{default:a(()=>[re]),_:1})]),_:1},512),[[K,n(i)!=0&&n(i)!=3]])]),_:1},8,["model","rules","disabled"])]),_:1})])}}};var me=ee(ue,[["__scopeId","data-v-c971ad88"]]);export{me as default};
