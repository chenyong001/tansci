import{_ as T}from"./Table.4fed16e0.js";import{r as k,t as x,o as v,at as N,a as c,b as z,c as B,d as s,w as l,g as n,e as i,v as w,T as y,au as D,E}from"./index.5c6e7eb3.js";const L={class:"task-log"},R=w("\u6E05\u7A7A\u65E5\u5FD7"),P={__name:"TaskLog",setup(M){const t=k({loading:!1,page:{current:1,size:10,total:1},tableTitle:[{prop:"serverName",label:"\u4EFB\u52A1\u670D\u52A1"},{prop:"status",alias:"statusName",label:"\u72B6\u6001"},{prop:"executionTime",label:"\u6267\u884C\u65F6\u95F4"},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"},{prop:"remarks",label:"\u5907\u6CE8"}],tableData:[]}),{loading:u,page:g,tableHeight:S,tableTitle:p,tableData:d}=x(t);v(()=>{a()});const a=()=>{t.loading=!0,N(t.page).then(e=>{t.loading=!1,t.tableData=e.result.records,t.page.current=e.result.current,t.page.size=e.result.size,t.page.total=e.result.total})},m=e=>{t.page.size=e,a()},_=e=>{t.page.current=e,a()},f=()=>{a()},h=()=>{y.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u6E05\u7A7A, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{D({}).then(e=>{e&&(E.success("\u64CD\u4F5C\u6210\u529F!"),a())})}).catch(e=>{console.log(e)})},C=(e,o)=>{e.row.status===0&&e.column.property==="statusName"?o({color:"#67C23A",fontWeight:"700"}):e.row.status===1&&e.column.property==="statusName"?o({color:"#f00",fontWeight:"700"}):o({})};return(e,o)=>{const r=c("el-button"),b=c("el-card");return z(),B("div",L,[s(b,null,{default:l(()=>[s(T,{data:n(d),column:n(p),page:n(g),loading:n(u),onOnSizeChange:m,onOnCurrentChange:_,onSetCellColor:C},{search:l(()=>[i("div",null,[s(r,{onClick:h,type:"danger",icon:"DeleteFilled"},{default:l(()=>[R]),_:1})]),i("div",null,[s(r,{onClick:f,icon:"RefreshRight",circle:""})])]),_:1},8,["data","column","page","loading"])]),_:1})])}}};export{P as default};
