<!DOCTYPE html>
<html>
<head>
    <title>ChatGPT API Demo</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#submit').click(function() {
                $('#response').text("正在请求数据，请等待...");
                // 设置API请求参数
                const data = JSON.stringify({
                    // engine: "text-davinci-003",
                    prompt: $('#prompt').val(),
                    temperature: 0.7,
                    max_tokens: 2048,
                    n:1
                    // stop: ['\n']
                    // stop: None
                });

                // 设置请求选项和API凭证
                const options = {
                    // url: 'https://api.openai.com/v1/engines/davinci-codex/completions',
                    url: 'https://api.openai.com/v1/engines/text-davinci-003/completions',
                    type: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer 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'
                    },
                    data: data,
                    dataType: 'json'
                };

                // 向API发送POST请求
                $.ajax(options)
                    .done(function(data) {
                        const reply = data.choices[0].text;
                        $('#response').text(reply);
                    })
                    .fail(function(jqXHR, textStatus, errorThrown) {
                        console.log('请求失败: ' + errorThrown);
                    });
            });
        });
    </script>
</head>
<body>
    <h1>ChatGPT API, engine: "text-davinci-003"</h1>
    <label for="prompt">提示:</label>
    <input type="text" id="prompt" name="prompt" />
    <button id="submit">提交</button>
    <br /><br />
    <label for="response">响应:</label>
    <textarea id="response" name="response" rows="5" cols="50" disabled="disabled" style="display: inline-block;width:800px;height:400px"></textarea>
</body>
</html>
